<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Phoenix - Your Journey Continues</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body { font-family: Inter, sans-serif; }
    .bg-gradient-cosmic {
      background: linear-gradient(135deg, #0c0f23 0%, #1a0b2e 30%, #16213e 60%, #0f3460 100%);
    }
    .bg-pattern {
      background-image:
        radial-gradient(circle at 20% 80%, rgba(120,119,198,0.3), transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.15), transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120,119,198,0.15), transparent 50%);
    }
    .phoenix-glow {
      box-shadow:
        0 0 50px rgba(251,146,60,0.3),
        0 0 100px rgba(251,146,60,0.2),
        inset 0 0 50px rgba(251,146,60,0.1);
      border: 2px solid rgba(251,146,60,0.3);
      background: radial-gradient(circle, rgba(251,146,60,0.1) 0%, transparent 70%);
    }
    .timer-digit {
      background: linear-gradient(145deg, #1f2937, #111827);
      box-shadow: inset 5px 5px 10px #0d1117, inset -5px -5px 10px #1a2230;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-cosmic bg-pattern text-gray-100">

  <!-- Spinner -->
  <div id="loading-spinner" class="fixed inset-0 flex items-center justify-center bg-black/60 z-50">
    <div class="animate-spin rounded-full h-24 w-24 border-t-4 border-orange-400"></div>
  </div>

  <!-- Login Screen -->
  <div id="login-screen" class="hidden min-h-screen flex items-center justify-center p-6">
    <div class="w-full max-w-md bg-gray-900 rounded-xl p-6 shadow-xl">
      <h1 class="text-2xl font-semibold mb-4">Enter Journey</h1>
      <div class="space-y-3">
        <input id="password-input" type="password" placeholder="Password"
               class="w-full px-4 py-3 rounded bg-gray-800 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-400"/>
        <button id="login-button"
                class="w-full py-3 rounded bg-orange-500 hover:bg-orange-600 transition">Enter Journey</button>
        <p id="login-error" class="text-sm text-red-400"></p>
      </div>
    </div>
  </div>

  <!-- App Container -->
  <div id="app-container" class="hidden">
    <!-- Top bar -->
    <header class="p-4 flex items-center justify-between">
      <h2 class="text-xl font-semibold">Phoenix</h2>
      <div class="flex items-center gap-4">
        <span id="current-coins" class="px-3 py-1 rounded bg-gray-800 border border-gray-700">0</span>
      </div>
    </header>

    <!-- Main -->
    <main class="p-6 grid gap-6">
      <!-- Phoenix and rank -->
      <section class="bg-gray-900 rounded-xl p-6 phoenix-glow">
        <div class="flex items-center justify-between">
          <div>
            <div id="rank-name" class="text-2xl font-semibold">Loading...</div>
            <div id="rank-story" class="text-gray-300 mt-1">Please wait</div>
          </div>
          <div id="rank-level" class="text-4xl font-bold">1</div>
        </div>
        <div id="phoenix-display" class="mt-6"></div>
      </section>

      <!-- Timer -->
      <section class="bg-gray-900 rounded-xl p-6">
        <div class="grid grid-cols-4 gap-4 text-center">
          <div><div id="timer-days" class="timer-digit text-3xl font-mono rounded p-3">00</div><div class="text-xs mt-1">Days</div></div>
          <div><div id="timer-hours" class="timer-digit text-3xl font-mono rounded p-3">00</div><div class="text-xs mt-1">Hours</div></div>
          <div><div id="timer-minutes" class="timer-digit text-3xl font-mono rounded p-3">00</div><div class="text-xs mt-1">Minutes</div></div>
          <div><div id="timer-seconds" class="timer-digit text-3xl font-mono rounded p-3">00</div><div class="text-xs mt-1">Seconds</div></div>
        </div>
      </section>

      <!-- Progress + actions -->
      <section class="bg-gray-900 rounded-xl p-6">
        <div id="progress-section">
          <div class="h-3 bg-gray-800 rounded">
            <div id="progress-bar" class="h-3 bg-orange-500 rounded" style="width: 0%;"></div>
          </div>
          <div id="progress-text" class="text-sm text-gray-300 mt-2">Preparing...</div>
        </div>
        <div class="mt-4 flex gap-3">
          <button id="urge-button" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Handle Urge</button>
          <button id="relapse-button" class="px-4 py-2 bg-red-600 rounded hover:bg-red-700">Relapse</button>
        </div>
      </section>

      <!-- Stats -->
      <section class="bg-gray-900 rounded-xl p-6">
        <div>Longest streak: <span id="longest-streak">0d 0h</span></div>
      </section>
    </main>
  </div>

  <!-- App script as ES module -->
  <script type="module" src="./journey.js"></script>
</body>
</html>